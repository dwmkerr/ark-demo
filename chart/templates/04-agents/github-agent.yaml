{{- if .Values.mcpServers.github.enabled }}
---
apiVersion: ark.mckinsey.com/v1alpha1
kind: Agent
metadata:
  name: github-agent
  labels:
    {{- include "ark-demo.labels" . | nindent 4 }}
  annotations:
    ark.mckinsey.com/dashboard-icon: "/icons/github.png"
spec:
  description: GitHub specialist for repository management, issues, pull requests, workflows, and security
  # Uses default model configured in the system
  tools:
    - name: github-add-comment-to-pending-review
      type: mcp
    - name: github-add-issue-comment
      type: mcp
    - name: github-add-sub-issue
      type: mcp
    - name: github-assign-copilot-to-issue
      type: mcp
    - name: github-cancel-workflow-run
      type: mcp
    - name: github-create-and-submit-pull-request-review
      type: mcp
    - name: github-create-branch
      type: mcp
    - name: github-create-gist
      type: mcp
    - name: github-create-issue
      type: mcp
    - name: github-create-or-update-file
      type: mcp
    - name: github-create-pending-pull-request-review
      type: mcp
    - name: github-create-pull-request
      type: mcp
    - name: github-create-pull-request-with-copilot
      type: mcp
    - name: github-create-repository
      type: mcp
    - name: github-delete-file
      type: mcp
    - name: github-delete-pending-pull-request-review
      type: mcp
    - name: github-delete-workflow-run-logs
      type: mcp
    - name: github-dismiss-notification
      type: mcp
    - name: github-download-workflow-run-artifact
      type: mcp
    - name: github-fork-repository
      type: mcp
    - name: github-get-code-scanning-alert
      type: mcp
    - name: github-get-commit
      type: mcp
    - name: github-get-dependabot-alert
      type: mcp
    - name: github-get-discussion
      type: mcp
    - name: github-get-discussion-comments
      type: mcp
    - name: github-get-file-contents
      type: mcp
    - name: github-get-global-security-advisory
      type: mcp
    - name: github-get-issue
      type: mcp
    - name: github-get-issue-comments
      type: mcp
    - name: github-get-job-logs
      type: mcp
    - name: github-get-latest-release
      type: mcp
    - name: github-get-me
      type: mcp
    - name: github-get-notification-details
      type: mcp
    - name: github-get-pull-request
      type: mcp
    - name: github-get-pull-request-diff
      type: mcp
    - name: github-get-pull-request-files
      type: mcp
    - name: github-get-pull-request-review-comments
      type: mcp
    - name: github-get-pull-request-reviews
      type: mcp
    - name: github-get-pull-request-status
      type: mcp
    - name: github-get-release-by-tag
      type: mcp
    - name: github-get-secret-scanning-alert
      type: mcp
    - name: github-get-tag
      type: mcp
    - name: github-get-team-members
      type: mcp
    - name: github-get-teams
      type: mcp
    - name: github-get-workflow-run
      type: mcp
    - name: github-get-workflow-run-logs
      type: mcp
    - name: github-get-workflow-run-usage
      type: mcp
    - name: github-list-branches
      type: mcp
    - name: github-list-code-scanning-alerts
      type: mcp
    - name: github-list-commits
      type: mcp
    - name: github-list-dependabot-alerts
      type: mcp
    - name: github-list-discussion-categories
      type: mcp
    - name: github-list-discussions
      type: mcp
    - name: github-list-gists
      type: mcp
    - name: github-list-global-security-advisories
      type: mcp
    - name: github-list-issue-types
      type: mcp
    - name: github-list-issues
      type: mcp
    - name: github-list-notifications
      type: mcp
    - name: github-list-org-repository-security-advisories
      type: mcp
    - name: github-list-pull-requests
      type: mcp
    - name: github-list-releases
      type: mcp
    - name: github-list-repository-security-advisories
      type: mcp
    - name: github-list-secret-scanning-alerts
      type: mcp
    - name: github-list-starred-repositories
      type: mcp
    - name: github-list-sub-issues
      type: mcp
    - name: github-list-tags
      type: mcp
    - name: github-list-workflow-jobs
      type: mcp
    - name: github-list-workflow-run-artifacts
      type: mcp
    - name: github-list-workflow-runs
      type: mcp
    - name: github-list-workflows
      type: mcp
    - name: github-manage-notification-subscription
      type: mcp
    - name: github-manage-repository-notification-subscription
      type: mcp
    - name: github-mark-all-notifications-read
      type: mcp
    - name: github-merge-pull-request
      type: mcp
    - name: github-push-files
      type: mcp
    - name: github-remove-sub-issue
      type: mcp
    - name: github-reprioritize-sub-issue
      type: mcp
    - name: github-request-copilot-review
      type: mcp
    - name: github-rerun-failed-jobs
      type: mcp
    - name: github-rerun-workflow-run
      type: mcp
    - name: github-run-workflow
      type: mcp
    - name: github-search-code
      type: mcp
    - name: github-search-issues
      type: mcp
    - name: github-search-orgs
      type: mcp
    - name: github-search-pull-requests
      type: mcp
    - name: github-search-repositories
      type: mcp
    - name: github-search-users
      type: mcp
    - name: github-star-repository
      type: mcp
    - name: github-submit-pending-pull-request-review
      type: mcp
    - name: github-unstar-repository
      type: mcp
    - name: github-update-gist
      type: mcp
    - name: github-update-issue
      type: mcp
    - name: github-update-pull-request
      type: mcp
    - name: github-update-pull-request-branch
      type: mcp
  prompt: |
    I'm a GitHub specialist who can help you interact with GitHub repositories, issues, pull requests, and workflows.

    I have access to comprehensive GitHub tools including:
    - Repository management (search, create, update files)
    - Issue tracking (list, create, update, search issues and sub-issues)
    - Pull request operations (create, review, merge, get diffs and files)
    - Workflow automation (list, run, rerun workflows and artifacts)
    - Code scanning and security (alerts, advisories)
    - Discussions, gists, releases, and tags
    - Team and organization management

    Simply ask me to help with any GitHub-related task and I'll use the appropriate tools to assist you.
{{- end }}
